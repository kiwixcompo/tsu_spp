TSU STAFF PORTAL - FILES TO UPLOAD FOR ID CARD SYSTEM
=====================================================

IMPORTANT: Upload these files to apply all ID card system changes:

CONTROLLERS:
- app/Controllers/IDCardController.php
- app/Controllers/ProfileController.php (UPDATED - fixed database calls)
- app/Controllers/AuthController.php
- app/Controllers/AdminController.php (UPDATED - fixed database calls)

VIEWS:
- app/Views/admin/id-card-generator.php
- app/Views/admin/id-card-preview.php
- app/Views/profile/edit.php
- app/Views/auth/register.php

HELPERS:
- app/Helpers/QRCodeHelper.php

ROUTES:
- routes/web.php

DATABASE:
- database/add_staff_number.sql (RUN THIS SQL FIRST!)

STORAGE:
- Create folder: storage/qrcodes/ (with 755 permissions)

=====================================================
DEPLOYMENT STEPS:
=====================================================

1. RUN DATABASE MIGRATION FIRST:
   - Go to phpMyAdmin or MySQL console
   - Run the SQL in: database/add_staff_number.sql
   - This adds the staff_number column to profiles table

2. CREATE STORAGE FOLDER:
   - Create folder: storage/qrcodes/
   - Set permissions: chmod 755 storage/qrcodes

3. UPLOAD FILES:
   - Upload all files listed above to their respective locations
   - Maintain the folder structure

4. TEST THE SYSTEM:
   - Login as admin
   - Go to Admin Dashboard > ID Cards
   - Select a user and generate ID card
   - Verify QR code appears on back of ID card
   - Test download and print functionality

=====================================================
FEATURES IMPLEMENTED:
=====================================================

âœ… Staff Number Field:
   - Dropdown to select TSU/SP/ or TSU/JP/
   - Number input for the ID number
   - Saved as: TSU/SP/001 or TSU/JP/001
   - Required field in registration and profile edit

âœ… Name Fields:
   - First Name (required)
   - Middle Name (optional)
   - Last Name (required)
   - Middle name shows on profile when present

âœ… ID Card System:
   - Front: Photo, Name, Staff ID, Faculty, Department, Email
   - Back: QR Code, Security Unit info, Profile URL
   - Professional design with TSU branding

âœ… QR Code Generation:
   - Auto-generates QR code for each profile
   - Links to public profile page
   - Stored in storage/qrcodes/
   - Served via /qrcode/{filename} route

âœ… Download & Print:
   - Print button for physical ID cards
   - Download as PDF (front and back)
   - High-quality output for card printing

âœ… Bulk Generation:
   - Select multiple users
   - Generate ID cards in bulk
   - Filter users with/without ID cards

âœ… Photo Display:
   - Profile photos show on ID cards
   - Fallback to initials if no photo
   - Multiple path resolution for compatibility

=====================================================
NOTES:
=====================================================

- QR codes are generated using external API (no library needed)
- Uses QRServer API with QuickChart as backup
- All errors logged to error.log file
- Staff number is unique (database constraint)
- ID cards are print-ready (3.5" x 5.5" standard size)

=====================================================
DOCUMENTATION FILES CREATED:
=====================================================

ðŸ“‹ UPLOAD_THESE_FILES.txt - This file (deployment file list)
ðŸ“‹ DEPLOYMENT_CHECKLIST.md - Step-by-step deployment guide
ðŸ“‹ ID_CARD_SYSTEM_GUIDE.md - Complete system documentation
ðŸ“‹ IMPLEMENTATION_SUMMARY.md - What was built and why
ðŸ“‹ ADMIN_QUICK_REFERENCE.md - Quick reference for admins
ðŸ“‹ ERROR_LOGGING_SETUP.md - Error logging documentation
ðŸ“‹ LOCAL_SETUP.md - Local development setup
ðŸ“‹ START_LOCAL.txt - Quick start for local testing

=====================================================
DEPLOYMENT PRIORITY:
=====================================================

ðŸ”´ CRITICAL (Must do first):
1. Backup database
2. Run database/add_staff_number.sql
3. Create storage/qrcodes/ folder (chmod 755)

ðŸŸ¡ IMPORTANT (Upload these files):
4. Upload all Controller files
5. Upload all View files
6. Upload Helper files
7. Upload routes/web.php
8. Upload public/index.php

ðŸŸ¢ TESTING (After upload):
9. Test registration with staff number
10. Test ID card generation
11. Test QR code display
12. Test download/print
13. Check error.log for issues

=====================================================
QUICK TEST:
=====================================================

After deployment, test these URLs:

1. Registration: /public/register
   - Verify staff ID dropdown shows TSU/SP/ and TSU/JP/

2. Admin ID Cards: /public/admin/id-cards
   - Verify user list loads
   - Click "Generate ID Card" on any user

3. ID Card Preview: /public/admin/id-cards/preview/{id}
   - Verify photo shows
   - Verify QR code shows
   - Test Print button
   - Test Download button

4. QR Code: /public/qrcode/{filename}
   - Should show PNG image
   - Scan with phone to test

=====================================================
